
# Домашнее задание к занятию «Введение в микросервисы»

## Задача 1: API Gateway 

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:
- маршрутизация запросов к нужному сервису на основе конфигурации,
- возможность проверки аутентификационной информации в запросах,
- обеспечение терминации HTTPS.

Обоснуйте свой выбор.

## Cравнительная таблица возможностей популярных API Gateway:  

| Характеристика          | NGINX | Traefik | Envoy | HAProxy | Apache APISIX |
|------------------------|---------------|---------|-------|---------|---------------|
| **Маршрутизация**      | Да | Да | Да | Да | Да |
| **Аутентификация**     | Плагины | Через middleware | Да | Вручную | Да |
| **Терминация HTTPS**   | Да | Да | Да | Да | Да |
| **Балансировка нагрузки** | Да | Да | Да | Да | Да |
| **Интеграция с сервисами аутентификации (OAuth2, JWT)** | Через плагины | Требует доработки | Да | Сложная настройка | Да |
| **Поддержка Service Mesh** | Через сторонние решения | Ограничено | Да | Ограничено | Да |
| **Конфигурирование** | Файлы, API| Динамическое | API, YAML | Файлы | API, YAML |
| **Простота настройки** | Средняя | Высокая | Средняя | Средняя | Средняя |

### Выбор решения
На основе таблицы оптимальным выбором будет **Apache APISIX**, так как он:  
- Поддерживает маршрутизацию, аутентификацию и терминацию HTTPS "из коробки".
- Легко масштабируется и интегрируется с сервисами.
- Имеет мощные встроенные возможности мониторинга, балансировки и работы с аутентификацией (JWT, OAuth2).

В компании, где я работаю, отдали предпочтение **NGINX**.

## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:
- поддержка кластеризации для обеспечения надёжности,
- хранение сообщений на диске в процессе доставки,
- высокая скорость работы,
- поддержка различных форматов сообщений,
- разделение прав доступа к различным потокам сообщений,
- простота эксплуатации.

Обоснуйте свой выбор.

## Cравнительная таблица возможностей популярных брокеров сообщений:  

| Характеристика                     | RabbitMQ          | Apache Kafka      | NATS JetStream  | ActiveMQ Artemis | Redis Streams |
|-------------------------------------|-------------------|-------------------|-----------------|------------------|---------------|
| **Кластеризация**                   | Да (Mirrored Queues, Quorum Queues) | Да (репликация, ISR) | Да (JetStream, Supercluster) | Да (Master-Slave, Network of Brokers) | Да (Sentinel, Cluster Mode) |
| **Хранение сообщений на диске**      | Да (если включено) | Да (журнал в commit log) | Да (JetStream) | Да (Journal + KahaDB) | Да (RDB/AOF) |
| **Высокая скорость работы**          | Средняя (задержки при подтверждении) | Очень высокая (батчи, асинхронная запись) | Высокая (легковесный) | Средняя | Высокая (но не для больших объемов) |
| **Поддержка различных форматов сообщений** | Да (JSON, Protobuf, XML и др.) | Да (JSON, Avro, Protobuf) | Да (JSON, Protobuf) | Да (JSON, XML, Protobuf) | Да (JSON, MsgPack) |
| **Разделение прав доступа**          | Да (LDAP, ACL, Vhost) | Да (ACL, SASL, Kerberos) | Ограниченно (только базовая ACL) | Да (JAAS, LDAP, ACL) | Ограниченно (простые ACL) |
| **Простота эксплуатации**            | Средняя (требует настройки и мониторинга) | Сложная (ZooKeeper, продвинутая настройка) | Простая | Средняя (но проще, чем Kafka) | Очень простая |


### Выбор решения  
На основе таблицы оптимальным выбором будет **Apache Kafka**, если:  
- Важна высокая производительность, масштабируемость и работа с большими объемами данных.  
- Нужно гарантированное хранение сообщений на диске и надежная кластеризация.  
- Требуется разделение прав и интеграция с безопасностью (SASL, ACL).  
- Используется event-driven архитектура или стриминг данных.  

В компании, где я работаю, отдали предпочтение **RabbitMQ**. Из-за простоты эксплуатации и классической модели очередей